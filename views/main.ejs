<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escull la teva aventura | La cova dels dies</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel='stylesheet' href='/resources/css/bafarada.css'>
    <link rel='stylesheet' href='/resources/css/fallo.css'>
    <link rel='stylesheet' href="/resources/css/seguent.css">
    <link rel='stylesheet' href="/resources/css/animate.css">
    <script src="resources/js/onLoad.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1"><link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>    
    <link rel="stylesheet" type="text/css" href="/resources/css/loading-bar.css"/>
    <script type="text/javascript" src="/resources/js/loading-bar.js"></script>
    <link rel="stylesheet" href="/resources/css/buttons.css">
    <link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  </head>
<script>
    $(function(){
    var str = '#len'; 
    $(document).ready(function(){
      var i, stop;
      i = 1;
      stop = 4;
      setInterval(function(){
        if (i > stop){
          return;
        }
        $('#len'+(i++)).toggleClass('bounce');
      }, 500)
    });
  });
</script>
<style>
    .hoverable {
    display: inline-block;
    backface-visibility: hidden;
    vertical-align: middle;
    position: relative;
    box-shadow: 0 0 1px rgba(0, 0, 0, 0);
   /* tranform: translateZ(0);*/
    transition-duration: 0.3s;
    transition-property: transform;
  }
  
  .hoverable:before {
    position: absolute;
    pointer-events: none;
    z-index: -1;
    content: "";
    top: 100%;
    left: 5%;
    height: 10px;
    width: 90%;
    opacity: 0;
    background: -webkit-radial-gradient(center, ellipse, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0) 80%);
    background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0) 80%);
    /* W3C */
    transition-duration: 0.3s;
    transition-property: transform, opacity;
  }
  
  .hoverable:hover, .hoverable:active, .hoverable:focus {
    transform: translateY(-5px);
  }
  
  .hoverable:hover:before, .hoverable:active:before, .hoverable:focus:before {
    opacity: 1;
    transform: translateY(-5px);
  }
  
  @keyframes bounce-animation {
    16.65% {
      -webkit-transform: translateY(8px);
      transform: translateY(8px);
    }
    33.3% {
      -webkit-transform: translateY(-6px);
      transform: translateY(-6px);
    }
    49.95% {
      -webkit-transform: translateY(4px);
      transform: translateY(4px);
    }
    66.6% {
      -webkit-transform: translateY(-2px);
      transform: translateY(-2px);
    }
    83.25% {
      -webkit-transform: translateY(1px);
      transform: translateY(1px);
    }
    100% {
      -webkit-transform: translateY(0);
      transform: translateY(0);
    }
  }
  .bounce {
    animation-name: bounce-animation;
    animation-duration: 2s;
  }
  
  /*everything below here is just setting up the page, so dont worry about it */
  @media (min-width: 768px) {
    .navbar {
      text-align: center !important;
      float: none;
      display: inline-block;
    }
  }
  body {
    background-color: black;
    font-weight: 600;
    text-align: center !important;
  }
  
  nav {
    background: none !important;
    text-transform: uppercase;
  }
  /*nav li {
    margin-left: 3em;
    margin-right: 3em;
  }*/
  nav li a {
    transition: 0.5s color ease-in-out;
  }
  
  .page-title {
    opacity: 0.75 !important;
  }
</style>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-inverse" id="topbar_border">
          <div class="container-fluid" id="topbar">
            <ul class="nav navbar-nav">
              <li><a id="len1" class="hoverable" href="/">Inici</a></li>
              <li><a id="len2" class="hoverable" href="/joc">Jugar</a></li>
            </ul>
          </div>
        </nav>  
        <div>
            <div class="page-title">
              <h2>Escull la teva aventura</h2>
              <p class="lead">
              </p>
            </div>
          </div>
        </div>
        <div class="barra label-center" data-value="Iniciant..." style="width: 100%; height: 60px; position: relative;"></div>  
        <div class="content" style="opacity: 0%;">
        <div id="output">
        <div class="bafarada bafarada-left" id="bafarada"><h1>Esperant una resposta...</h1>
        </div>
        <img class="talker"src="/resources/img/happy.png">
        <br><br><br>
    </div>
    <input id="1" type="button" hidden/>
    <input id="2" type="button" hidden/>
    <input id="3" type="button" hidden/>
    <input id="submit1" type="button"  onclick="submit('#1')"/>
    <input id="submit2" type="button"  onclick="submit('#2')"/>
    <input id="submit3" type="button" value="El LleÃ³ no mor" onclick="submit('#3')"/>

    </div>
    <script type="module">
      var sleep = (delay) => new Promise((resolve) => setTimeout(resolve, delay))//loading.io
      function loading(){
        var bar = new ldBar(".barra", {
     "stripe": '#f00',
     "stripe-width": 30,
     "preset": "stripe",
     "value": 0
    });
    var i = 0;
    var progress = async() => {while(i<=100){
        let timing = Math.random() * (25, 20) + 20;
        let calculate = Math.round(timing)
        if(i < calculate){
          let random = Math.random() * (150 - 100) + 100;
          await sleep(random)
          bar.set(i)
          i++
        }
        else{
          await sleep(10)
          bar.set(i)
          i++
        }
      }
      $(".barra").remove();
      $(".content").css("opacity", "100%")
      run()
  }
  progress()
  
      }
      loading()
  </script>
  
    <script>
        var option;
        function submit(id){
          val=$(id).val();
          option = $.parseJSON(val)
          console.log(option)
          $.post("/api",option, function(data){
              if(data.status){
                document.title = data.title              
              }
                if(data.case == "fallo"){
                  $('body').addClass("fallo");
                  $('body').on('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e){
                    $('body').delay(200).removeClass('fallo');
                    escriure(data.text, 50)
                    $("body").css("background-color", "rgb(255, 0, 0)")
                    document.getElementById("topbar").style.display = "none";
                    document.getElementById("topbar_border").style.display = "none"
                  });
                  localStorage.removeItem("lvl")
                }
                else{
                  escriure(data.text, 50, true, next, 6000, data.lvl)
                  localStorage.setItem("lvl", data.lvl)
                }
            });
          }
        
      

</script>
</html>